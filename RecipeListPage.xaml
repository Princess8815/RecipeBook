<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:RecipeBook.ViewModels"
             x:Class="RecipeBook.RecipeListPage"
             x:Name="RecipeListPageRoot">

    <VerticalStackLayout>

        <CollectionView ItemsSource="{Binding Recipes}"
                        SelectionMode="Single"
                        SelectedItem="{Binding SelectedRecipe, Mode=TwoWay}">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid Padding="10" ColumnDefinitions="Auto,*" ColumnSpacing="10">

                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer
                                NumberOfTapsRequired="2"
                                Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=BindingContext.RecipeMenuCommand}"
                                CommandParameter="{Binding .}" />

                            <SwipeGestureRecognizer 
                                Direction="Right"
                                Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=BindingContext.AddToFavoritesCommand}"
                                CommandParameter="{Binding .}" />

                            <SwipeGestureRecognizer 
                                Direction="Left"
                                Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=BindingContext.RemoveFromFavoritesCommand}"
                                CommandParameter="{Binding .}" />
                        </Grid.GestureRecognizers>

                        <!-- Image in first column -->
                        <Image Grid.Column="0"
                               Source="{Binding ImageUrl}"
                               WidthRequest="100"
                               HeightRequest="100" />

                        <!-- Text in second column -->
                        <VerticalStackLayout Grid.Column="1"
                                             VerticalOptions="Center">
                            <Label Text="{Binding Title}"
                                   FontAttributes="Bold"
                                   FontSize="16" />
                            <Label Text="{Binding Description}"
                                   FontAttributes="Italic"
                                   FontSize="14"
                                   TextColor="Gray" />
                        </VerticalStackLayout>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <!-- Your label goes here -->
        <Label Text="{Binding ResultMessage}"
       FontSize="16"
       TextColor="Black"
       Padding="10"
       HorizontalOptions="Center"
       VerticalOptions="End" />

    </VerticalStackLayout>
</ContentPage>


